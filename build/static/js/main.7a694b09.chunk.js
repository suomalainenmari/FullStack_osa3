(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(3),o=t(2),r=t(14),a=t.n(r),u=t(4),i=t.n(u),s="/api/persons",l=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},h=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},f=t(0),j=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(c.a)(a,2),i=u[0],s=u[1],j=Object(o.useState)(""),O=Object(c.a)(j,2),v=O[0],x=O[1],w=Object(o.useState)(""),S=Object(c.a)(w,2),C=S[0],N=S[1],k=Object(o.useState)(!0),y=Object(c.a)(k,2),T=y[0],P=y[1],I=Object(o.useState)(null),D=Object(c.a)(I,2),E=D[0],J=D[1];Object(o.useEffect)((function(){l().then((function(e){r(e)}))}),[]);var U=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{style:{color:"red",fontStyle:"italic",fontSize:20,borderStyle:"solid",padding:10,background:"lightgrey"},children:n})},z=T?t:t.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(U,{message:E}),Object(f.jsx)(g,{newSearch:C,handleSearchChange:function(e){0===C.length&&P(!0),C.length>0&&P(!1),N(e.target.value)}}),Object(f.jsx)("h3",{children:"add a new"}),Object(f.jsx)(p,{addInfo:function(e){e.preventDefault();var n={name:i,number:v},c=t.map((function(e){return e.name})),o=t.map((function(e){return e.number}));if(console.log(c),console.log(o),c.includes(i)){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=c.indexOf(i),u=t[a].id;h(u,n).then((function(e){r(t.filter((function(e){return e.id!==u}))),r(t.concat(e)),s(""),x(""),J("".concat(i," is now updated")),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.error),setTimeout((function(){J(null)}),5e3)}))}}else o.includes(v)?alert("Phone number ".concat(v," is already in use")):(d(n).then((function(e){r(t.concat(e)),s(""),x("")})).catch((function(e){console.log(e.response.data.error),J(e.response.data.error),setTimeout((function(){J(null)}),5e3)})),J("".concat(i," is now added")),setTimeout((function(){J(null)}),5e3))},newName:i,handleNameChange:function(e){s(e.target.value)},newNumber:v,handleNumberChange:function(e){x(e.target.value)}}),Object(f.jsx)("h3",{children:"Numbers"}),Object(f.jsx)(m,{namesToShow:z,persons:t,deletePerson:function(e){var n=e.id,c=e.name;window.confirm("Delete ".concat(c," from phonebook?"))&&(J("".concat(c," is now deleted from phonebook")),setTimeout((function(){J(null)}),5e3),b(n).then=function(){r(t.filter((function(e){return e.id!==n}))),s(""),x("")})}})]})},m=function(e){var n=e.namesToShow,t=e.deletePerson;return Object(f.jsx)("div",{children:n.map((function(e){return Object(f.jsx)(O,{person:e,deletePerson:function(){return t(e)}},e.id)}))})},O=function(e){var n=e.person,t=e.deletePerson;return Object(f.jsxs)("li",{children:[n.name," ",n.number,Object(f.jsx)("button",{onClick:t,id:n.id,name:n.name,children:"delete"})]})},p=function(e){var n=e.addInfo,t=e.newName,c=e.handleNameChange,o=e.newNumber,r=e.handleNumberChange;return Object(f.jsxs)("form",{onSubmit:n,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:t,onChange:c})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:o,onChange:r})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.newSearch,t=e.handleSearchChange;return Object(f.jsxs)("div",{children:["filer shown with ",Object(f.jsx)("input",{value:n,onChange:t})]})};a.a.render(Object(f.jsx)(j,{}),document.getElementById("root"));n.default=j}},[[38,1,2]]]);
//# sourceMappingURL=main.7a694b09.chunk.js.map