{"version":3,"sources":["services/persons.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","showAll","setShowAll","notificationMessage","setNotificationMessage","useEffect","personService","initialPersons","Notification","message","style","color","fontStyle","fontSize","borderStyle","padding","background","namesToShow","filter","person","name","toUpperCase","includes","handleSearchChange","event","length","target","value","addInfo","preventDefault","nameObject","number","nimet","map","numerot","console","log","window","confirm","index","indexOf","setTimeout","returnedPerson","n","concat","alert","handleNameChange","handleNumberChange","deletePerson","Persons","Person","onClick","PersonForm","onSubmit","onChange","type","Filter","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d14097e6.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl='/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n  }\n  \n  const create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n  }\n  \n  const update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n  }\n\n  const deletingPerson = (id)=>{\n      const request=axios.delete(`${baseUrl}/${id}`)\n      return request.then(response=>response.data)\n      \n  }\n  \n  export default{getAll, create,update,deletingPerson}","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber]=useState('')\n  const [newSearch, setNewSearch]=useState('')\n  const [showAll, setShowAll]=useState(true)\n  const [notificationMessage, setNotificationMessage]=useState(null)\n\n  useEffect(()=>{\n    personService\n    .getAll()\n    .then(initialPersons=>{\n        setPersons(initialPersons)\n    })\n  },[])\n\n  const deletePerson=({id,name})=>{\n    \n    \n    if (window.confirm(`Delete ${name} from phonebook?`)) {\n      setNotificationMessage(\n        `${name} is now deleted from phonebook`\n      )\n      setTimeout(()=>{\n        setNotificationMessage(null)\n      },5000)\n      personService\n        .deletingPerson(id)\n        .then=()=>{\n          setPersons(persons.filter(n=>n.id!==id))\n          setNewName('')\n          setNewNumber('')\n        }\n    }\n  }\n\n  const Notification = ({ message })=>{\n    const notificationStyle ={\n      color:'green',\n      fontStyle:'italic',\n      fontSize:20,\n      borderStyle:'solid',\n      padding:10,\n      background:'lightgrey'\n    }\n    if (message===null){\n        return null\n    }\n    return (\n        <div style={notificationStyle}>\n            {message}\n        </div>\n    )\n}\n\n  const handleNumberChange=(event)=>{\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameChange =(event)=>{\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const addInfo= (event)=>{\n    event.preventDefault()\n    const nameObject={\n      name: newName,\n      number:newNumber\n    }\n\n    const nimet =persons.map(person=>person.name)\n    const numerot=persons.map(person=>person.number)\n    console.log(nimet)\n    console.log(numerot)\n\n    if (nimet.includes(newName)){\n      \n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const index= nimet.indexOf(newName)\n        console.log(index)\n        const id= persons[index].id\n        console.log(\"Id on\" + id)\n\n        setNotificationMessage(\n          `${newName} is now updated`\n        )\n        setTimeout(()=>{\n          setNotificationMessage(null)\n        },5000)\n\n        personService\n          .update(id, nameObject)\n          .then(returnedPerson=>{\n            setPersons(persons.filter(n=>n.id!==id))\n            setPersons(persons.concat(returnedPerson))\n            setNewName('')\n            setNewNumber('')\n          }\n        )\n      }\n    }\n    \n    else if (numerot.includes(newNumber)){\n      alert(`Phone number ${newNumber} is already in use`)\n    }\n\n    else {\n\n      setNotificationMessage(\n        `${newName} is now added to phonebook`\n      )\n      setTimeout(()=>{\n        setNotificationMessage(null)\n      },5000)\n\n      personService\n        .create(nameObject)\n        .then(returnedPerson=>{\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n    })\n    }\n\n  }\n\n  const handleSearchChange = (event)=>{\n    if(newSearch.length===0){\n      setShowAll(true)\n    }if(newSearch.length>0){\n      setShowAll(false)\n    }\n    setNewSearch(event.target.value)\n  }\n\n  const namesToShow = showAll\n    ? persons\n    : persons.filter(person=>person.name.toUpperCase().includes(newSearch.toUpperCase()))\n\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={notificationMessage}/>\n        \n      <Filter \n      newSearch={newSearch}\n      handleSearchChange={handleSearchChange}\n      />\n\n      <h3>add a new</h3>\n      <PersonForm\n      addInfo={addInfo}\n      newName={newName}\n      handleNameChange={handleNameChange}\n      newNumber={newNumber}\n      handleNumberChange={handleNumberChange}\n      \n      />\n      \n\n      <h3>Numbers</h3>\n      <Persons \n      namesToShow={namesToShow}\n      persons={persons}\n      deletePerson={deletePerson}\n      \n      />\n      \n    </div>\n  )\n\n}\n\nconst Persons=({namesToShow,deletePerson})=>{\n  return(\n    <div>\n  {namesToShow.map(person=>\n  <Person \n    key={person.id}\n    person={person}\n    deletePerson={()=>deletePerson(person)}\n      />\n  )}\n  \n  </div>\n  )\n}\n\n\nconst Person=({person, deletePerson})=>{\n  console.log(\"person komponentissa tulostuuko id: \"+person.id +\" ja nimi: \" + person.name)\n  \n  return(\n    <li>\n      {person.name} {person.number}\n      <button onClick={deletePerson} id={person.id} name={person.name}>delete</button>\n      </li>\n  )\n}\n\nconst PersonForm=({addInfo, newName, handleNameChange,newNumber,handleNumberChange})=>{\n  return(\n    <form onSubmit={addInfo}>\n        <div>\n          name: <input \n          value={newName}\n          onChange={handleNameChange} />\n        </div>\n        <div>\n          number: <input\n          value={newNumber}\n          onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n\n  )\n}\n\nconst Filter=({newSearch, handleSearchChange})=>{\n  return(\n    <div>\n          filer shown with <input\n          value={newSearch}\n          onChange={handleSearchChange}/>\n        </div>\n  )\n}\n\n\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n\nexport default App"],"sourceRoot":""}